<div class="reset-password-class">
    <div class="reset-password-label">
        <h1>Reset Password</h1>
    </div>
    @if (isLoading()) {
        <div class="loading-overlay">
            <div class="spinner"></div>
            <p>Saving...</p>
        </div>
    }
    <form [formGroup]="resetPasswordForm" (ngSubmit)="resetPassword()">
        <div class="form-group">
            <div class="new-pass-class">
                <div class="new-pass-label">
                    <label>New Password:</label>
                </div>
                <div class="password-input-container">
                    <input [type]="showNewPassword ? 'text' : 'password'" formControlName="newPassword" placeholder="Enter new password...">
                    <button type="button" class="show-password-btn" (click)="toggleNewPasswordVisibility()">
                        <img [src]="showNewPassword ? 'assets/unshow-password-icon.png' : 'assets/show-password-icon.png'"
                              [alt]="showNewPassword ? 'Hide password' : 'Show password'">
                    </button>
                </div>
                @if (newPasswordControl?.touched) {
                    @if (newPasswordControl?.errors?.['required']) {
                        <div><span>New password is required</span></div>
                    } @else if (newPasswordControl?.errors?.['minlength']) {
                        <div><span>Password must be at least 6 characters</span></div>
                    }
                }
            </div>
            <div class="confirm-pass-class">
                <div class="confirm-pass-label">
                    <label>Confirm Password:</label>
                </div>
                <div class="password-input-container">
                    <input [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword" placeholder="Confirm new password...">
                    <button type="button" class="show-password-btn" (click)="toggleConfirmPasswordVisibility()">
                        <img [src]="showConfirmPassword ? 'assets/unshow-password-icon.png' : 'assets/show-password-icon.png'"
                              [alt]="showConfirmPassword ? 'Hide password' : 'Show password'">
                    </button>
                </div>
                @if (confirmPasswordControl?.touched) {
                    @if (confirmPasswordControl?.errors?.['required']) {
                        <div><span>Confirm password is required</span></div>
                    }
                }
            </div>
        </div>
        <button type="submit" [disabled]="isLoading()">Reset Password</button>
    </form>
    @if (errorMessage()) {
        <div class="error-message">{{ errorMessage() }}</div>
    }
    @if (successMessage()) {
        <div class="success-message">{{ successMessage() }}</div>
    }
    @if (showSuccessPopup()) {
        <div class="success-popup">
            <p>Password reset successful!</p>
            <button (click)="closeSuccessPopup()">Go to Login</button>
        </div>
    }
</div>
