<div class="reset-password-class">
    <div class="reset-password-label">
        <h1>Reset Password</h1>
    </div>
    @if (isLoading()) {
        <div class="loading-overlay">
            <div class="spinner"></div>
            <p>Saving...</p>
        </div>
    }
    <form [formGroup]="resetPasswordForm" (ngSubmit)="resetPassword()">
        <div class="form-group">
            <div class="new-pass-class">
                <div class="new-pass-label">
                    <label>New Password:</label>
                </div>
                <input type="password" formControlName="newPassword" placeholder="Enter new password...">
                @if (newPasswordControl?.touched) {
                    @if (newPasswordControl?.errors?.['required']) {
                        <div><span>New password is required</span></div>
                    } @else if (newPasswordControl?.errors?.['minlength']) {
                        <div><span>Password must be at least 6 characters</span></div>
                    }
                }
            </div>
            <div class="confirm-pass-class">
                <div class="confirm-pass-label">
                    <label>Confirm Password:</label>
                </div>
                <input type="password" formControlName="confirmPassword" placeholder="Confirm new password...">
                @if (confirmPasswordControl?.touched) {
                    @if (confirmPasswordControl?.errors?.['required']) {
                        <div><span>Confirm password is required</span></div>
                    }
                }
            </div>
        </div>
        <button type="submit" [disabled]="isLoading()">Reset Password</button>
    </form>
    <div *ngIf="errorMessage()" class="error-message">{{ errorMessage() }}</div>
    <div *ngIf="successMessage()" class="success-message">{{ successMessage() }}</div>
    <div *ngIf="showSuccessPopup()" class="success-popup">
        <p>Password reset successful!</p>
        <button (click)="closeSuccessPopup()">Go to Login</button>
    </div>
</div>
